{
    "version": "https://jsonfeed.org/version/1",
    "title": "Welcome to my tiny world • All posts by \"硬件开发\" category",
    "description": "小樊&小小樊的学习笔记🌸",
    "home_page_url": "http://qianqiu-cell.github.io",
    "items": [
        {
            "id": "http://qianqiu-cell.github.io/2023/01/30/hardware/Quartus/",
            "url": "http://qianqiu-cell.github.io/2023/01/30/hardware/Quartus/",
            "title": "Quartus基础教程",
            "date_published": "2023-01-29T16:00:00.000Z",
            "content_html": "<h1 id=\"一-quartus及驱动安装\"><a class=\"markdownIt-Anchor\" href=\"#一-quartus及驱动安装\">#</a> 一、Quartus 及驱动安装</h1>\n<h2 id=\"11-quartus安装\"><a class=\"markdownIt-Anchor\" href=\"#11-quartus安装\">#</a> 1.1 Quartus 安装</h2>\n<p>根据百度网盘中的安装包及教程进行软件安装<br>\n<img data-src=\"/images/Quartus/1.1.png\" alt=\"\"></p>\n<h2 id=\"12-驱动安装\"><a class=\"markdownIt-Anchor\" href=\"#12-驱动安装\">#</a> 1.2 驱动安装</h2>\n<p><code>FPGA</code>  与计算机共有<mark>两条</mark>数据线进行连接，<ins>一条用于供电及通讯，另一条用于程序的烧录</ins>。将 FPGA 开发板正确连接至电脑后，可在设备管理器中看到如 <code>USB-SERIAL CH340</code>  及 <code>Altera USB-Blaster</code>  则证明 <code>FPGA</code>  与计算机连接成功。（⚠️若小图标处有感叹号，则证明缺少驱动，可根据安装教程进行驱动安装，本次安装的电脑为重装后的电脑，没有安装任何驱动即可正确识别）<br>\n<img data-src=\"/images/Quartus/1.2.png\" alt=\"\"></p>\n<h1 id=\"二-modelsim安装\"><a class=\"markdownIt-Anchor\" href=\"#二-modelsim安装\">#</a> 二、Modelsim 安装</h1>\n<p>安装 <code>Modelsim</code> ，安装包及教程见百度网盘<br>\n<img data-src=\"/images/Quartus/2.1.png\" alt=\"\"><br>\n安装完成 <code>Modelsim</code>  后，在 <code>Quartus</code>  中依次点击 <code>Tools→Options→General→EDA Tool Options</code>  选择 <code>Modelsim</code>  的安装路径里面的 <code>win64</code> <br>\n<img data-src=\"/images/Quartus/2.2.png\" alt=\"\"></p>\n<h1 id=\"三-程序编译\"><a class=\"markdownIt-Anchor\" href=\"#三-程序编译\">#</a> 三、程序编译</h1>\n<p>进入 <code>Quartus</code>  软件，点击 <code>start compilation</code>  进行程序编译<br>\n<img data-src=\"/images/Quartus/3.1.png\" alt=\"\"></p>\n<h1 id=\"四-仿真\"><a class=\"markdownIt-Anchor\" href=\"#四-仿真\">#</a> 四、仿真</h1>\n<p>（以下为测试脚本设置过程，项目已经设置好，作为普及）依次点击 <code>Assignments→Settings</code> 。打开后点击 <code>EDA Tool Settings→Simulation</code> ，之后在 <code>NativeLink settings</code>  中选择 <code>Compile test bench</code> <br>\n<img data-src=\"/images/Quartus/4.1.png\" alt=\"\"><br>\n 选择测试脚本（点击 <code>Test Benches…→new</code> ）<br>\n<img data-src=\"/images/Quartus/4.2.png\" alt=\"\"><br>\n图中从上往下：</p>\n<ul>\n<li><code>StandardTR</code>  是系统建立 <code>testbench</code>  文件 <code>.vt</code>  的名字。</li>\n<li><code>StandardTR_vlg_tst</code>  是 <code>.vt</code>  里面的 <code>module</code>  的名字。</li>\n<li>点击 <code>Fill name</code>  右边的 <code>…</code>  选择 <code>.vt</code>  文件，点击 <code>add</code> 。<br>\n（以下过程为正式仿真过程，需要运行）在完成以上步骤及编译完成之后点击 <code>Tools→Run Simulation Tool→RTL Simulation</code>  进行仿真<br>\n<img data-src=\"/images/Quartus/4.3.png\" alt=\"\"><br>\n仿真完成后可显示如下界面（点击 <code>Zoom full</code>  可显示波形）<br>\n<img data-src=\"/images/Quartus/4.4.png\" alt=\"\"></li>\n</ul>\n<h1 id=\"五-程序下载至fpga\"><a class=\"markdownIt-Anchor\" href=\"#五-程序下载至fpga\">#</a> 五、程序下载至 FPGA</h1>\n<p>如下图所示将 FPGA 与电脑连接连接<br>\n<img data-src=\"/images/Quartus/5.1.jpg\" alt=\"\"><br>\n其中 USB Blaster 为编程时，电脑给开发板传输程序文件的数据线，在传输完程序之后即可移除（不拔出来也没事儿）。<br>\nUSB to TTL 为开发板提供电源功能、并在串口调试阶段作为电脑与开发板进行数据交换的线。<br>\n在 Quartus 中依次点击 <code>Tools→Programmer</code>  打开如下界面<br>\n<img data-src=\"/images/Quartus/5.2.png\" alt=\"\"><br>\n点击 <code>Start</code>  即可开始程序下载，若未识别到硬件，可点击 <code>Hardware Setup</code>  进行设置，如下图所示<br>\n<img data-src=\"/images/Quartus/5.3.png\" alt=\"\"></p>\n<h1 id=\"六-串口展示\"><a class=\"markdownIt-Anchor\" href=\"#六-串口展示\">#</a> 六、串口展示</h1>\n<p>打开 <code>XCOM</code> （串口调试助手，就是电脑和开发板进行数据交换的软件），波特率设置为 <code>115200</code> 、选择 <code>16</code>  进制显示、 <code>16</code>  进制发送，如下图所示。<br>\n<img data-src=\"/images/Quartus/6.1.png\" alt=\"\"><br>\n在设置完成后点击打开串口，在下方数据发送区输入数据 (只能依次输入，不能直接复制)，点击发送后即可在数据接受区得到 <code>FPGA</code>  运行后的结果，每次运行后都需要按下 <code>FPGA</code>  上的 <code>key1</code>  键进行复位。<br>\n<img data-src=\"/images/Quartus/6.2.png\" alt=\"\"></p>\n<h2 id=\"输入数据的获取\"><a class=\"markdownIt-Anchor\" href=\"#输入数据的获取\">#</a> 输入数据的获取</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZ2FpcnVvLmNvbS9maWxlL2RhdGEvZGF0YXNldC9pcmlzLmRhdGE=\">点击此处</span>可获得鸢尾花原始数据集，如下图所示<br>\n<img data-src=\"/images/Quartus/6.3.png\" alt=\"\"><br>\n每一行为一条数据，每一列依次表示花萼长、花萼宽、花瓣长、花瓣宽以及花的类型<br>\n将每条数据的十进制数据转换为如下格式的二进制数据<br>\n<img data-src=\"/images/Quartus/6.4.png\" alt=\"\"><br>\n以第一行数据为例，四个数据转换分别为：</p>\n<pre><code>5.1 = 0 0000 0101 0001 1001 1001\n3.5 = 0 0000 0011 1000 0000 0000\n1.4 = 0 0000 0001 0110 0110 0110\n0.2 = 0 0000 0000 0011 0011 0011\n</code></pre>\n<p>再将以上数据转换为 16 进制格式，如下所示</p>\n<pre><code>0 0000 0101 0001 1001 1001 = 00 51 99\n0 0000 0011 1000 0000 0000 = 00 38 00\n0 0000 0001 0110 0110 0110 = 00 16 66\n0 0000 0000 0011 0011 0011 = 00 03 33\n</code></pre>\n<p>最后依次拼接即可获得输入数据 (需要调整一下顺序，我们的输入顺序是花瓣长、花瓣宽、花萼长、花萼宽，网页数据顺序为花萼长、花萼宽、花瓣长、花瓣宽) <code>00 16 66 00 03 33 00 51 99 00 38 00</code></p>\n<h1 id=\"七-quartus使用总结\"><a class=\"markdownIt-Anchor\" href=\"#七-quartus使用总结\">#</a> 七、Quartus 使用总结</h1>\n<p>Quartus 的使用步骤可以大致总结为：</p>\n<ul>\n<li>程序编译（根据想要实现的逻辑进行程序编写）</li>\n<li>程序仿真（在完成程序编译之后，并不确定程序的正确性，可以先在仿真系统中进行仿真运行，即在电脑上先预览程序的正确性，此步骤为可选步骤）</li>\n<li>程序下载至 FPGA（此过程即为将程序下载至 FPGA，从而使 FPGA 可以根据程序实现一定的功能，并使用串口将 FPGA 的运行结果可视化展现）</li>\n</ul>\n",
            "tags": [
                "硬件开发"
            ]
        },
        {
            "id": "http://qianqiu-cell.github.io/2022/11/16/hardware/stm32cubemx/",
            "url": "http://qianqiu-cell.github.io/2022/11/16/hardware/stm32cubemx/",
            "title": "使用stm32cubemx新建工程",
            "date_published": "2022-11-15T16:00:00.000Z",
            "content_html": "<p>参考视频：<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMThYNHkxTTc2My8/cD0xNSZhbXA7dmRfc291cmNlPTlhZWNiM2JkMWM5Mzg2MjM5MzA0MzNmODYwZjRhNTU1\">https://www.bilibili.com/video/BV18X4y1M763/?p=15&amp;vd_source=9aecb3bd1c938623930433f860f4a555</span></p>\n<h1 id=\"一-新建工程\"><a class=\"markdownIt-Anchor\" href=\"#一-新建工程\">#</a> 一、新建工程</h1>\n<p>点击 <code>ACCESS TO MCU SELECTOR</code> （如红框所示）<br>\n<img data-src=\"/images/stm32cubemx/1.1.png\" alt=\"\"><br>\n在搜索框内输入所需要的芯片型号，在右边搜索结果中双击自己的板子型号，这里我们使用的是 <code>stm32f103zet6</code> <br>\n<img data-src=\"/images/stm32cubemx/1.2.png\" alt=\"\"></p>\n<h1 id=\"二-一些必要的工作\"><a class=\"markdownIt-Anchor\" href=\"#二-一些必要的工作\">#</a> 二、一些必要的工作</h1>\n<p>选择 <code>system core</code>  中的 <code>RCC</code> ，将 <code>High Speed Clock(HSE)</code>  定义为 <code>Crystal/Ceramic Resonator</code> <br>\n<img data-src=\"/images/stm32cubemx/2.1.png\" alt=\"\"><br>\n 选择 <code>system core</code>  中的 <code>SYS</code> ，将 <code>debug</code>  定义为 <code>Serial Wire</code> <br>\n<img data-src=\"/images/stm32cubemx/2.2.png\" alt=\"\"></p>\n<h1 id=\"三-定义io端口\"><a class=\"markdownIt-Anchor\" href=\"#三-定义io端口\">#</a> 三、定义 IO 端口</h1>\n<p>定义 IO 端口，即定义自己使用哪一个引脚作为 IO 输入与输出。选择 <code>system core</code>  中的 <code>GPIO</code> <br>\n<img data-src=\"/images/stm32cubemx/3.1.png\" alt=\"\"><br>\n 在右下方输入我们要定义的引脚，输入完成后对应引脚会闪烁，之后定位到我们所需要的引脚并进行设置，这里我们定义 <code>PB3</code>  为输入端口<br>\n<img data-src=\"/images/stm32cubemx/3.2.png\" alt=\"\"><br>\n完成设置后会在左侧显示已经配置好的引脚信息<br>\n<img data-src=\"/images/stm32cubemx/3.3.png\" alt=\"\"></p>\n<h1 id=\"四-配置usart1串口通讯\"><a class=\"markdownIt-Anchor\" href=\"#四-配置usart1串口通讯\">#</a> 四、配置 usart1 串口通讯</h1>\n<p>打开 <code>connectivity</code>  下的 <code>usart1</code>  界面，将 <code>mode</code>  设置为 <code>asynchronous</code> <br>\n<img data-src=\"/images/stm32cubemx/4.1.png\" alt=\"\"><br>\n 打开 <code>NVIC Settings</code> ，选择 <code>Enable</code> <br>\n<img data-src=\"/images/stm32cubemx/4.2.png\" alt=\"\"><br>\n 在下面的 <code>parameter settings</code>  中会显示配置后串口通讯的一些信息<br>\n<img data-src=\"/images/stm32cubemx/4.3.png\" alt=\"\"></p>\n<h1 id=\"五-配置时钟\"><a class=\"markdownIt-Anchor\" href=\"#五-配置时钟\">#</a> 五、配置时钟</h1>\n<p>打开 <code>clock configuration</code> ，将时钟配置为 <code>72MHz</code> ，如下图所示<br>\n<img data-src=\"/images/stm32cubemx/5.1.png\" alt=\"\"></p>\n<h1 id=\"六-生成程序前的一些配置\"><a class=\"markdownIt-Anchor\" href=\"#六-生成程序前的一些配置\">#</a> 六、生成程序前的一些配置</h1>\n<p>点击 <code>project manager</code> ，并按照下列图片进行配置<br>\n<img data-src=\"/images/stm32cubemx/6.1.png\" alt=\"\"><br>\n<img data-src=\"/images/stm32cubemx/6.2.png\" alt=\"\"></p>\n<h1 id=\"七-生成代码\"><a class=\"markdownIt-Anchor\" href=\"#七-生成代码\">#</a> 七、生成代码</h1>\n<p>点击 <code>generate code</code> ，进行代码的生成，如下图所示<br>\n<img data-src=\"/images/stm32cubemx/7.1.png\" alt=\"\"><br>\n完成代码生成后即可生成如下界面，三个选项分别是打开文件夹，打开工程（使用 <code>keil MDK</code> ），关闭当前窗口<br>\n<img data-src=\"/images/stm32cubemx/7.2.png\" alt=\"\"></p>\n",
            "tags": [
                "硬件开发"
            ]
        }
    ]
}